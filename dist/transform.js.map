{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap e5f4fe9e437ce41fb167","webpack:///external {\"commonjs\":\"jquery\",\"commonjs2\":\"jquery\",\"amd\":\"jquery\",\"root\":\"jQuery\"}","webpack:///./src/transform.js","webpack:///./src/index.js"],"names":["$","toMatrixArray","matrixStr","matched","replace","match","split","toMatrix3d","matrix","name","val","unit","ret","indexOf","getConverted","base","num","length","parseFloat","toParsedFloat","m","correctUnit","transform","width","height","arr","i","len","nums","bases","k","l","join","parseStyle","property","value","result","map","trim","v","getTransformGenerateFunction","splitted","list","parsed","push","transformByPos","defaultVal","each","valStr","pos","data2String","tmp","isArray","valExpression","rateFn","element","startTf","endTf","isRelative","start","end","basePos","endTfInPixel","css","s","e","toMatrix","console","warn","fx","step","elem","style"],"mappings":"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","file":"transform.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"jquery\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"jquery\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"transform\"] = factory(require(\"jquery\"));\n\telse\n\t\troot[\"eg\"] = root[\"eg\"] || {}, root[\"eg\"][\"transform\"] = factory(root[\"jQuery\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_0__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap e5f4fe9e437ce41fb167","module.exports = __WEBPACK_EXTERNAL_MODULE_0__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"commonjs\":\"jquery\",\"commonjs2\":\"jquery\",\"amd\":\"jquery\",\"root\":\"jQuery\"}\n// module id = 0\n// module chunks = 0 1","import jQuery from \"jquery\";\n\nconst $ = jQuery;\n\n/**\n * Convert matrix string to array type.\n *\n * eg. matrix(1, 0, 0, 1, 0, 0) ==>  [\"matrix\", [1, 0, 0, 1, 0, 0]]\n * matrix3d(1,0,0,0,0,1,-2.44929e-16,0,0,2.44929e-16,1,0,0,0,0,1)\n */\nfunction toMatrixArray(matrixStr) {\n\tif (!matrixStr || matrixStr === \"none\") {\n\t\treturn [\"matrix\", [\"1\", \"0\", \"0\", \"1\", \"0\", \"0\"]];\n\t}\n\n\tconst matched = matrixStr.replace(/\\s/g, \"\").match(/(matrix)(3d)*\\((.*)\\)/);\n\n\treturn [matched[1] + (matched[2] || \"\"), matched[3].split(\",\")];\n}\n\nfunction toMatrix3d(matrix) {\n\tconst name = matrix[0];\n\tconst val = matrix[1];\n\n\tif (name === \"matrix3d\") {\n\t\treturn matrix;\n\t}\n\n\t// matrix(a, b, c, d, tx, ty) is a shorthand for matrix3d(a, b, 0, 0, c, d, 0, 0, 0, 0, 1, 0, tx, ty, 0, 1)\n\treturn [\n\t\t`${name}3d`, [val[0], val[1], \"0\", \"0\",\n\t\t\tval[2], val[3], \"0\", \"0\",\n\t\t\t\"0\", \"0\", \"1\", \"0\",\n\t\t\tval[4], val[5], \"0\", \"1\"],\n\t];\n}\n\nfunction unit(name) {\n\tlet ret;\n\n\tif (name.indexOf(\"translate\") >= 0) {\n\t\tret = \"px\";\n\t} else if (name.indexOf(\"rotate\") >= 0) {\n\t\tret = \"deg\";\n\t} else {\n\t\tret = \"\";\n\t}\n\treturn ret;\n}\n\n/**\n * Get a 'px' converted value if it has a %.\n * Otherwise it returns value appened with 'px'.\n */\nfunction getConverted(val, base) {\n\tlet ret = val;\n\tconst num = val.match(/((-|\\+)*[0-9]+)%/);\n\n\tif (num && num.length >= 1) {\n\t\tret = `${base * (parseFloat(num[1]) / 100)}px`;\n\t} else if (val.indexOf(\"px\") === -1) {\n\t\tret = `${val}px`;\n\t}\n\n\treturn ret;\n}\n\n/**\n * Parse a transform atom value.\n *\n * \"30px\" --> {num: 30, unit: \"px\"}\n *\n * Because calculation of string number is heavy,\n * In advance, convert a string number to a float number with an unit for the use of transformByPos,\n * which is called very frequently.\n */\nfunction toParsedFloat(val) {\n\tconst m = val.match(/((-|\\+)*[\\d|.]+)(px|deg|rad)*/);\n\tlet ret;\n\n\tif (m && m.length >= 1) {\n\t\tret = {\"num\": parseFloat(m[1]), \"unit\": m[3]};\n\t}\n\treturn ret;\n}\n\nfunction correctUnit(transform, width, height) {\n\tlet m;\n\tlet ret = \"\";\n\tconst arr = transform.split(\")\");\n\n\tfor (let i = 0, len = arr.length - 1; i < len; i++) {\n\t\tlet name = arr[i];\n\n\t\t// '%' is only meaningful on translate.\n\t\tif ((m = name.match(/(translate([XYZ]|3d)?|rotate)\\(([^)]*)/)) && m.length > 1) {\n\t\t\tif (m[1] === \"rotate\") {\n\t\t\t\tif (m[3].indexOf(\"deg\") === -1) {\n\t\t\t\t\tname = `${m[1]}(${m[3]}deg`;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// 2d, 3d\n\t\t\t\tconst nums = m[3].split(\",\");\n\t\t\t\tconst bases = [width, height, 100];\n\n\t\t\t\tswitch (m[2]) {\n\t\t\t\t\tcase \"X\":\n\t\t\t\t\t\tname = `${m[1]}(${getConverted(m[3], width)}`;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"Y\":\n\t\t\t\t\t\tname = `${m[1]}(${getConverted(m[3], height)}`;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"Z\":\n\t\t\t\t\t\t// Meaningless. Do nothing\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tfor (let k = 0, l = nums.length; k < l; k++) {\n\t\t\t\t\t\t\tnums[k] = getConverted(nums[k], bases[k]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tname = `${m[1]}(${nums.join(\",\")}`;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tname = ` ${name})`;\n\t\tret += name;\n\t}\n\n\t// Remove wrong '%'s and '+=' because it cannot be translated to a matrix.\n\tret = ret.replace(\"%\", \"\").replace(\"+=\", \"\");\n\treturn ret;\n}\n\n// [\"translate\" , [\"10\", \"20\"]]\nfunction parseStyle(property) {\n\tconst m = property.match(/(\\b\\w+?)\\((\\s*[^)]+)/);\n\tlet name;\n\tlet value;\n\tlet result = [\"\", \"\"];\n\n\tif (m && m.length > 2) {\n\t\tname = m[1];\n\t\tvalue = m[2].split(\",\");\n\t\tvalue = $.map(value, v => $.trim(v));\n\t\tresult = [$.trim(name), value];\n\t}\n\treturn result;\n}\n\nfunction getTransformGenerateFunction(transform) {\n\tconst splitted = transform.split(\")\");\n\tconst list = [];\n\n\t// Make parsed transform list.\n\tfor (let i = 0, len = splitted.length - 1; i < len; i++) {\n\t\tconst parsed = parseStyle(splitted[i]);\n\n\t\tparsed[1] = $.map(parsed[1], toParsedFloat);\n\t\tlist.push(parsed);\n\t}\n\n\tconst transformByPos = pos => {\n\t\tlet ret = \"\";\n\t\tlet defaultVal = 0;\n\n\t\t$.each(list, i => {\n\t\t\tif (list[i][0].indexOf(\"scale\") >= 0) {\n\t\t\t\tdefaultVal = 1;\n\t\t\t} else {\n\t\t\t\tdefaultVal = 0;\n\t\t\t}\n\n\t\t\tconst valStr = $.map(list[i][1], value => {\n\t\t\t\tlet val = value.num;\n\n\t\t\t\tdefaultVal === 1 && (val -= 1);\n\t\t\t\treturn (defaultVal + val * pos) + (value.unit || \"\");\n\t\t\t}).join(\",\");\n\n\t\t\tret += `${list[i][0]}(${valStr}) `;\n\t\t});\n\n\t\treturn ret;\n\t};\n\n\treturn transformByPos;\n}\n\n/**\n * [\"translate\", [100, 0]] --> translate(100px, 0)\n * {translate : [100, 0]} --> translate(100px, 0)\n * {matrix : [1, 0, 1, 0, 100, 0]} --> matrix(1, 0, 1, 0, 100, 0)\n */\nfunction data2String(property) {\n\tlet name;\n\tconst tmp = [];\n\n\tif ($.isArray(property)) {\n\t\tname = property[0];\n\t\tconst valExpression = property[1].join(`${unit(name)},`);\n\n\t\treturn `${name}(${valExpression}${unit(name)})`;\n\t} else {\n\t\tfor (name in property) {\n\t\t\ttmp.push(name);\n\t\t}\n\t\treturn $.map(tmp, v => `${v}(${property[v]}${unit(v)})`).join(\" \");\n\t}\n}\n\nfunction rateFn(element, startTf, endTf) {\n\tconst isRelative = endTf.indexOf(\"+=\") >= 0;\n\tlet start;\n\tlet end;\n\tlet basePos;\n\n\t// Convert translate unit to 'px'.\n\tconst endTfInPixel = correctUnit(endTf,\n\t\t\t\tparseFloat($.css(element, \"width\")) || 0,\n\t\t\t\tparseFloat($.css(element, \"height\")) || 0);\n\n\tif (isRelative) {\n\t\tstart = (!startTf || startTf === \"none\") ?\n\t\t\t\t\t\"matrix(1, 0, 0, 1, 0, 0)\" : startTf;\n\t\tend = getTransformGenerateFunction(endTfInPixel);\n\t} else {\n\t\tstart = toMatrixArray(startTf);\n\t\tbasePos = toMatrixArray(\"none\"); // transform base-position\n\n\t\t// If the type of matrix is not equal, then match to matrix3d\n\t\tif (start[1].length < basePos[1].length) {\n\t\t\tstart = toMatrix3d(start);\n\t\t} else if (start[1].length > basePos[1].length) {\n\t\t\tbasePos = toMatrix3d(basePos);\n\t\t}\n\n\t\tend = getTransformGenerateFunction(endTfInPixel);\n\t}\n\n\treturn pos => {\n\t\tconst result = [];\n\t\tlet ret = \"\"; // matrix for interpolated value from current to base(1, 0, 0, 1, 0, 0)\n\n\t\tif (isRelative) {\n\t\t\t// This means a muliply between a matrix and a transform.\n\t\t\treturn start + end(pos);\n\t\t}\n\n\t\tif (pos === 1) {\n\t\t\tret = data2String(basePos);\n\t\t} else {\n\t\t\tfor (let i = 0, s, e, l = start[1].length; i < l; i++) {\n\t\t\t\ts = parseFloat(start[1][i]);\n\t\t\t\te = parseFloat(basePos[1][i]);\n\n\t\t\t\tresult.push(s + (e - s) * pos);\n\t\t\t}\n\n\t\t\tret = data2String([start[0], result]);\n\t\t}\n\t\treturn ret + end(pos);\n\t};\n}\n\nexport {\n\ttoMatrix3d,\n\ttoMatrixArray as toMatrix,\n\trateFn,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/transform.js","import jQuery from \"jquery\";\nimport {rateFn} from \"./transform\";\n\nconst $ = jQuery;\n\n/**\n * @namespace jQuery\n */\nif (!$) {\n\tconsole.warn(\"jQuery is not defined.\");\n} else {\n\t/**\n\t * A method that extends the <a href=http://api.jquery.com/animate/>.animate()</a> method provided by jQuery. With this method, you can use the transform property and 3D acceleration\n\t * @ko jQuery의<a href=http://api.jquery.com/animate/>animate() 메서드</a>를 확장한 메서드. CSS의 transform 속성과 3D 가속을 사용할 수 있다.\n\t * @name jQuery#animate\n\t * @alias eg.Transform\n\t * @method\n\t * @param {Object} properties An object composed of the CSS property and value which will be applied to an animation<ko>애니메이션을 적용할 CSS 속성과 값으로 구성된 객체</ko>\n\t * @param {Number|String} [duration=4000] Duration of the animation (unit: ms)<ko>애니메이션 진행 시간(단위: ms)</ko>\n\t * @param {String} [easing=\"swing\"] The easing function to apply to an animation<ko>애니메이션에 적용할 easing 함수</ko>\n\t * @param {Function} [complete] A function that is called once the animation is complete.<ko>애니메이션을 완료한 다음 호출할 함수</ko>\n\t *\n\t * @example\n\t * $(\"#box\")\n\t * \t\t.animate({\"transform\" : \"translate3d(150px, 100px, 0px) rotate(20deg) scaleX(1)\"} , 3000)\n\t * \t\t.animate({\"transform\" : \"+=translate3d(150px, 10%, -20px) rotate(20deg) scale3d(2, 4.2, 1)\"} , 3000);\n\t * @see {@link http://api.jquery.com/animate/}\n\t *\n\t * @support {\"ie\": \"10+\", \"ch\" : \"latest\", \"sf\" : \"latest\", \"edge\" : \"latest\", \"ios\" : \"7+\", \"an\" : \"2.3+ (except 3.x)\"}\n\t */\n\t$.fx.step.transform = fx => {\n\t\tfx.rateFn = fx.rateFn || rateFn(fx.elem, fx.start, fx.end);\n\t\t$.style(fx.elem, \"transform\", fx.rateFn(fx.pos));\n\t};\n}\n\nexport default $;\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js"],"sourceRoot":""}